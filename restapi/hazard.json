{
  "swagger": "2.0",
  "info": {
    "description": "Incore Hazard Service For Earthquake, Tornado, Tsunami and Hurricane",
    "version": "0.1.0",
    "title": "",
    "contact": {
      "name": "Jong S. Lee",
      "url": "http://resilience.colostate.edu",
      "email": "jonglee@illinois.edu"
    },
    "license": {
      "name": "Mozilla Public License 2.0 (MPL 2.0)",
      "url": "https://www.mozilla.org/en-US/MPL/2.0/"
    }
  },
  "host": "incore2-services.ncsa.illinois.edu",
  "basePath": "/hazard/api",
  "tags": [
    {
      "name": "earthquakes"
    },
    {
      "name": "tornadoes"
    },
    {
      "name": "tsunamis"
    },
    {
      "name": "hurricaneWindfields"
    }
  ],
  "schemes": [
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/earthquakes/{earthquake-id}": {
      "get": {
        "tags": [
          "earthquakes"
        ],
        "operationId": "getEarthquake",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "earthquake-id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "X-Credential-Username",
            "in": "header",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/Earthquake"
            },
            "headers": {
            }
          }
        }
      }
    },
    "/earthquakes/{earthquake-id}/raster": {
      "get": {
        "tags": [
          "earthquakes"
        ],
        "operationId": "getScenarioEarthquakeHazardForBox",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "X-Credential-Username",
            "in": "header",
            "required": false,
            "type": "string"
          },
          {
            "name": "earthquake-id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "demandType",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "demandUnits",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "minX",
            "in": "query",
            "required": false,
            "type": "number",
            "format": "double"
          },
          {
            "name": "minY",
            "in": "query",
            "required": false,
            "type": "number",
            "format": "double"
          },
          {
            "name": "maxX",
            "in": "query",
            "required": false,
            "type": "number",
            "format": "double"
          },
          {
            "name": "maxY",
            "in": "query",
            "required": false,
            "type": "number",
            "format": "double"
          },
          {
            "name": "gridSpacing",
            "in": "query",
            "required": false,
            "type": "number",
            "format": "double"
          },
          {
            "name": "amplifyHazard",
            "in": "query",
            "required": false,
            "type": "boolean",
            "default": true
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/SeismicHazardResults"
            },
            "headers": {
            }
          }
        }
      }
    },
    "/earthquakes/{earthquake-id}/values": {
      "get": {
        "tags": [
          "earthquakes"
        ],
        "operationId": "getScenarioEarthquakeHazardValues",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "X-Credential-Username",
            "in": "header",
            "required": false,
            "type": "string"
          },
          {
            "name": "earthquake-id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "demandType",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "demandUnits",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "amplifyHazard",
            "in": "query",
            "required": false,
            "type": "boolean",
            "default": true
          },
          {
            "name": "point",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string"
            },
            "collectionFormat": "multi"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/SeismicHazardResult"
              }
            },
            "headers": {
            }
          }
        }
      }
    },
    "/earthquakes/{earthquake-id}/liquefaction/values": {
      "get": {
        "tags": [
          "earthquakes"
        ],
        "summary": "Gets liquefaction(pgd) value",
        "description": "This needs a valid susceptibility dataset as a shapefile for the earthquake location",
        "operationId": "getScenarioEarthquakeLiquefaction",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "X-Credential-Username",
            "in": "header",
            "required": false,
            "type": "string"
          },
          {
            "name": "earthquake-id",
            "in": "path",
            "description": "Earthquake dataset guid from data service",
            "required": true,
            "type": "string"
          },
          {
            "name": "geologyDataset",
            "in": "query",
            "description": "Geology dataset from data service",
            "required": true,
            "type": "string"
          },
          {
            "name": "groundWaterId",
            "in": "query",
            "description": "Ground Water Id that currently doesn't do anything",
            "required": false,
            "type": "string"
          },
          {
            "name": "demandUnits",
            "in": "query",
            "description": "Liquefaction demand unit. PGD",
            "required": true,
            "type": "string"
          },
          {
            "name": "point",
            "in": "query",
            "description": "List of points provided as lat,long. ex: '28.01,-83.85'",
            "required": true,
            "type": "array",
            "items": {
              "type": "string"
            },
            "collectionFormat": "multi"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/LiquefactionHazardResult"
              }
            }
          },
          "500": {
            "description": "Internal Server Error"
          },
          "404": {
            "description": "Not Found - Invalid earthquake ID or geologyDataset id "
          },
          "406": {
            "description": "Unsupported Format - Possibly the point parameter"
          }
        }
      }
    },
    "/earthquakes": {
      "get": {
        "tags": [
          "earthquakes"
        ],
        "operationId": "getEarthquakes",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "X-Credential-Username",
            "in": "header",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Earthquake"
              }
            },
            "headers": {
            }
          }
        }
      },
      "post": {
        "tags": [
          "earthquakes"
        ],
        "operationId": "createEarthquake",
        "consumes": [
          "multipart/form-data"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "X-Credential-Username",
            "in": "header",
            "required": false,
            "type": "string"
          },
          {
            "name": "earthquake",
            "in": "formData",
            "required": false,
            "type": "string"
          },
          {
            "name": "file",
            "in": "formData",
            "required": false,
            "type": "array",
            "items": {
              "$ref": "#/definitions/FormDataBodyPart"
            },
            "collectionFormat": "multi"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/Earthquake"
            },
            "headers": {
            }
          }
        }
      }
    },
    "/earthquakes/soil/amplification": {
      "get": {
        "tags": [
          "earthquakes"
        ],
        "operationId": "getEarthquakeSiteAmplification",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "method",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "datasetId",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "siteLat",
            "in": "query",
            "required": false,
            "type": "number",
            "format": "double"
          },
          {
            "name": "siteLong",
            "in": "query",
            "required": false,
            "type": "number",
            "format": "double"
          },
          {
            "name": "demandType",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "hazard",
            "in": "query",
            "required": false,
            "type": "number",
            "format": "double"
          },
          {
            "name": "defaultSiteClass",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "default": {
            "description": "successful operation"
          }
        }
      }
    },
    "/earthquakes/slope/amplification": {
      "get": {
        "tags": [
          "earthquakes"
        ],
        "operationId": "getEarthquakeSlopeAmplification",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "siteLat",
            "in": "query",
            "required": false,
            "type": "number",
            "format": "double"
          },
          {
            "name": "siteLong",
            "in": "query",
            "required": false,
            "type": "number",
            "format": "double"
          }
        ],
        "responses": {
          "default": {
            "description": "successful operation"
          }
        }
      }
    },
    "/earthquakes/models": {
      "get": {
        "tags": [
          "earthquakes"
        ],
        "operationId": "getSupportedEarthquakeModels",
        "produces": [
          "application/json"
        ],
        "parameters": [
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "type": "array",
              "uniqueItems": true,
              "items": {
                "type": "string"
              }
            },
            "headers": {
            }
          }
        }
      }
    },
    "/tornadoes/{tornado-id}": {
      "get": {
        "tags": [
          "tornadoes"
        ],
        "operationId": "getTornado",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "X-Credential-Username",
            "in": "header",
            "required": false,
            "type": "string"
          },
          {
            "name": "tornado-id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/Tornado"
            },
            "headers": {
            }
          }
        }
      }
    },
    "/tornadoes/{tornado-id}/value": {
      "get": {
        "tags": [
          "tornadoes"
        ],
        "operationId": "getTornadoHazard",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "X-Credential-Username",
            "in": "header",
            "required": false,
            "type": "string"
          },
          {
            "name": "tornado-id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "demandUnits",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "siteLat",
            "in": "query",
            "required": false,
            "type": "number",
            "format": "double"
          },
          {
            "name": "siteLong",
            "in": "query",
            "required": false,
            "type": "number",
            "format": "double"
          },
          {
            "name": "simulation",
            "in": "query",
            "required": false,
            "type": "integer",
            "default": 0,
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/WindHazardResult"
            },
            "headers": {
            }
          }
        }
      }
    },
    "/tornadoes/{tornado-id}/values": {
      "get": {
        "tags": [
          "tornadoes"
        ],
        "operationId": "getTornadoHazardValues",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "X-Credential-Username",
            "in": "header",
            "required": false,
            "type": "string"
          },
          {
            "name": "tornado-id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "demandUnits",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "point",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string"
            },
            "collectionFormat": "multi"
          },
          {
            "name": "simulation",
            "in": "query",
            "required": false,
            "type": "integer",
            "default": 0,
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/WindHazardResult"
              }
            },
            "headers": {
            }
          }
        }
      }
    },
    "/tornadoes": {
      "get": {
        "tags": [
          "tornadoes"
        ],
        "operationId": "getTornadoes",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "X-Credential-Username",
            "in": "header",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Tornado"
              }
            },
            "headers": {
            }
          }
        }
      },
      "post": {
        "tags": [
          "tornadoes"
        ],
        "operationId": "createTornado",
        "consumes": [
          "multipart/form-data"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "X-Credential-Username",
            "in": "header",
            "required": false,
            "type": "string"
          },
          {
            "name": "tornado",
            "in": "formData",
            "required": false,
            "type": "string"
          },
          {
            "name": "file",
            "in": "formData",
            "required": false,
            "type": "array",
            "items": {
              "$ref": "#/definitions/FormDataBodyPart"
            },
            "collectionFormat": "multi"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/Tornado"
            },
            "headers": {
            }
          }
        }
      }
    },
    "/tornadoes/{tornado-id}/dataset": {
      "get": {
        "tags": [
          "tornadoes"
        ],
        "operationId": "getFile",
        "produces": [
          "text/plain"
        ],
        "parameters": [
        ],
        "responses": {
          "default": {
            "description": "successful operation"
          }
        }
      }
    }
  },
  "definitions": {
    "DeterministicHazardDataset": {
      "allOf": [
        {
          "$ref": "#/definitions/HazardDataset"
        },
        {
          "type": "object",
          "properties": {
            "eqParameters": {
              "$ref": "#/definitions/EqParameters"
            }
          }
        }
      ]
    },
    "Earthquake": {
      "type": "object",
      "discriminator": "eqType",
      "properties": {
        "id": {
          "type": "string"
        },
        "privileges": {
          "$ref": "#/definitions/Privileges"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "date": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "Earthquake dataset": {
      "allOf": [
        {
          "$ref": "#/definitions/Earthquake"
        },
        {
          "type": "object",
          "properties": {
            "hazardDatasets": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/HazardDataset"
              }
            }
          },
          "description": "Contains id, description, name, privileges and the hazard datasets"
        }
      ]
    },
    "EarthquakeModel": {
      "allOf": [
        {
          "$ref": "#/definitions/Earthquake"
        },
        {
          "type": "object",
          "properties": {
            "attenuations": {
              "type": "object",
              "additionalProperties": {
                "type": "number",
                "format": "double"
              }
            },
            "eqParameters": {
              "$ref": "#/definitions/EqParameters"
            },
            "visualizationParameters": {
              "$ref": "#/definitions/EqVisualization"
            },
            "defaultSiteClass": {
              "type": "string"
            },
            "siteAmplification": {
              "type": "string"
            },
            "rasterDataset": {
              "$ref": "#/definitions/HazardDataset"
            }
          }
        }
      ]
    },
    "EqParameters": {
      "type": "object",
      "properties": {
        "srcLatitude": {
          "type": "number",
          "format": "double"
        },
        "srcLongitude": {
          "type": "number",
          "format": "double"
        },
        "magnitude": {
          "type": "number",
          "format": "double"
        },
        "coseismicRuptureDepth": {
          "type": "number",
          "format": "double"
        },
        "dipAngle": {
          "type": "number",
          "format": "double"
        },
        "azimuthAngle": {
          "type": "number",
          "format": "double"
        },
        "rakeAngle": {
          "type": "number",
          "format": "double"
        },
        "seismogenicDepth": {
          "type": "number",
          "format": "double"
        },
        "depth": {
          "type": "number",
          "format": "double"
        },
        "depth2p5KmPerSecShearWaveVelocity": {
          "type": "number",
          "format": "double"
        },
        "shearWaveDepth1p0": {
          "type": "number",
          "format": "double"
        },
        "faultTypeMap": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "region": {
          "type": "string"
        }
      }
    },
    "EqVisualization": {
      "type": "object",
      "properties": {
        "demandType": {
          "type": "string"
        },
        "demandUnits": {
          "type": "string"
        },
        "minX": {
          "type": "number",
          "format": "double"
        },
        "minY": {
          "type": "number",
          "format": "double"
        },
        "maxX": {
          "type": "number",
          "format": "double"
        },
        "maxY": {
          "type": "number",
          "format": "double"
        },
        "numPoints": {
          "type": "integer",
          "format": "int32"
        },
        "amplifyHazard": {
          "type": "boolean"
        }
      }
    },
    "HazardDataset": {
      "type": "object",
      "discriminator": "hazardType",
      "properties": {
        "datasetId": {
          "type": "string"
        },
        "demandType": {
          "type": "string"
        },
        "demandUnits": {
          "type": "string"
        },
        "period": {
          "type": "number",
          "format": "double"
        }
      }
    },
    "Privileges": {
      "type": "object",
      "properties": {
        "userPrivileges": {
          "type": "object",
          "additionalProperties": {
            "type": "string",
            "enum": [
              "READ",
              "WRITE",
              "ADMIN"
            ]
          }
        },
        "groupPrivileges": {
          "type": "object",
          "additionalProperties": {
            "type": "string",
            "enum": [
              "READ",
              "WRITE",
              "ADMIN"
            ]
          }
        }
      }
    },
    "ProbabilisticHazardDataset": {
      "allOf": [
        {
          "$ref": "#/definitions/HazardDataset"
        },
        {
          "type": "object",
          "properties": {
            "recurrenceInterval": {
              "type": "integer",
              "format": "int32"
            },
            "recurrenceUnit": {
              "type": "string"
            }
          }
        }
      ]
    },
    "HazardResult": {
      "type": "object",
      "properties": {
        "latitude": {
          "type": "number",
          "format": "double"
        },
        "longitude": {
          "type": "number",
          "format": "double"
        },
        "hazardValue": {
          "type": "number",
          "format": "double"
        }
      }
    },
    "SeismicHazardResults": {
      "type": "object",
      "properties": {
        "period": {
          "type": "string"
        },
        "demandType": {
          "type": "string"
        },
        "units": {
          "type": "string"
        },
        "hazardResults": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/HazardResult"
          }
        }
      }
    },
    "SeismicHazardResult": {
      "type": "object",
      "properties": {
        "period": {
          "type": "string"
        },
        "demand": {
          "type": "string"
        },
        "units": {
          "type": "string"
        },
        "hazardValue": {
          "type": "number",
          "format": "double"
        }
      }
    },
    "LiquefactionHazardResult": {
      "type": "object",
      "properties": {
        "latitude": {
          "type": "number",
          "format": "double"
        },
        "longitude": {
          "type": "number",
          "format": "double"
        },
        "pgdUnits": {
          "type": "string"
        },
        "pgd": {
          "type": "number",
          "format": "double"
        },
        "liqProbability": {
          "type": "number",
          "format": "double"
        },
        "groundFailureProb": {
          "type": "array",
          "items": {
            "type": "number",
            "format": "double"
          }
        }
      }
    },
    "EFBox": {
      "type": "object",
      "properties": {
        "efBoxWidths": {
          "type": "array",
          "items": {
            "type": "number",
            "format": "double"
          }
        }
      }
    },
    "Tornado": {
      "type": "object",
      "discriminator": "tornadoType",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "privileges": {
          "$ref": "#/definitions/Privileges"
        },
        "date": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "TornadoDataset": {
      "allOf": [
        {
          "$ref": "#/definitions/Tornado"
        },
        {
          "type": "object",
          "properties": {
            "datasetId": {
              "type": "string"
            }
          }
        }
      ]
    },
    "TornadoModel": {
      "allOf": [
        {
          "$ref": "#/definitions/Tornado"
        },
        {
          "type": "object",
          "properties": {
            "tornadoModel": {
              "type": "string"
            },
            "tornadoParameters": {
              "$ref": "#/definitions/TornadoParameters"
            },
            "tornadoWidth": {
              "type": "array",
              "items": {
                "type": "number",
                "format": "double"
              }
            },
            "efBoxes": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/EFBox"
              }
            },
            "datasetId": {
              "type": "string"
            }
          }
        }
      ]
    },
    "TornadoParameters": {
      "type": "object",
      "properties": {
        "efRating": {
          "type": "string"
        },
        "maxWindSpeed": {
          "type": "number",
          "format": "double"
        },
        "startLatitude": {
          "type": "number",
          "format": "double"
        },
        "startLongitude": {
          "type": "number",
          "format": "double"
        },
        "randomSeed": {
          "type": "integer",
          "format": "int32"
        },
        "windSpeedMethod": {
          "type": "integer",
          "format": "int32"
        },
        "numSimulations": {
          "type": "integer",
          "format": "int32"
        },
        "endLatitude": {
          "type": "array",
          "items": {
            "type": "number",
            "format": "double"
          }
        },
        "endLongitude": {
          "type": "array",
          "items": {
            "type": "number",
            "format": "double"
          }
        }
      }
    },
    "WindHazardResult": {
      "type": "object",
      "properties": {
        "demandType": {
          "type": "string"
        },
        "demandUnits": {
          "type": "string"
        },
        "hazardValue": {
          "type": "number",
          "format": "double"
        }
      }
    }
  }
}
